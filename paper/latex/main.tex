%!TeX program = pdflatex
% LaTeX Template
% Author: Geoff Boeing
% Web: https://geoffboeing.com/
% Repo: https://github.com/gboeing/street-network-models

\RequirePackage[l2tabu,orthodox]{nag} % warn if using any obsolete or outdated commands
\documentclass[12pt,letterpaper]{article} % document style

% import encoding and font packages for pdflatex, in order
\usepackage[T1]{fontenc} % output T1 font encoding (8-bit) so accented characters are a single glyph
\usepackage[utf8]{inputenc} % allow input of utf-8 encoded characters
\usepackage{ebgaramond} % document's serif font
\usepackage{tgheros} % document's sans serif font

% import language, regionalization, microtype, and setspace in order
\usepackage[strict,autostyle]{csquotes} % smart and nestable quote marks
\usepackage[USenglish]{babel} % automatically regionalize hyphens, quote marks, etc
\usepackage{microtype} % improves text appearance with kerning, etc
\usepackage{setspace} % configure spacing between lines

% import everything else
\usepackage{abstract} % allow full-page title/abstract in twocolumn mode
\usepackage{authblk} % footnote-style author/affiliation info
\usepackage{booktabs} % better looking tables
\usepackage{caption} % custom figure/table caption styles
\usepackage{datetime} % enable formatting of date output
\usepackage[final]{draftwatermark} % watermark paper as a draft
\usepackage{endnotes} % enable endnotes
\usepackage{geometry} % configure page dimensions and margins
\usepackage{graphicx} % better inclusion of graphics
\usepackage{hyperref} % hypertext in document
\usepackage{natbib} % author-year citations w/ bibtex, including textual and parenthetical
\usepackage{rotating} % rotate wide tables or figures on a page to make them landscape
\usepackage{titlesec} % custom section and subsection heading
\usepackage{url} % make nice line-breakble urls

% print only the month and year when using \today
\newdateformat{monthyeardate}{\monthname[\THEMONTH] \THEYEAR}

\newcommand{\myname}{Geoff Boeing}
\newcommand{\myemail}{boeing@usc.edu}
\newcommand{\myaffiliation}{Department of Urban Planning and Spatial Analysis\\University of Southern California}
\newcommand{\paperdate}{April 2025}
\newcommand{\papertitle}{Updated Street Network Models and Measures for Every Urban Area in the World}
\newcommand{\papercitation}{Boeing, G. 2025. \papertitle. Under review at \textit{Journal Name}.}
\newcommand{\paperkeywords}{Urban Planning, Transportation, Data Science}

% location of figure files, via graphicx package
\graphicspath{{./figures/}}

% configure the page layout, via geometry package
\geometry{
    paper=letterpaper, % paper size
    top=3.8cm, % margin sizes
    bottom=3.8cm,
    left=4cm,
    right=4cm}
\setstretch{1} % line spacing
\clubpenalty=10000 % prevent orphans
\widowpenalty=10000 % prevent widows

% set section/subsection headings as the sans serif font, via titlesec package
\titleformat{\section}{\normalfont\sffamily\large\bfseries\color{black}}{\thesection.}{0.3em}{}
\titleformat{\subsection}{\normalfont\sffamily\small\bfseries\color{black}}{\thesubsection.}{0.3em}{}
\titleformat{\subsubsection}{\normalfont\sffamily\small\color{black}}{\thesubsubsection.}{0.3em}{}

% make figure/table captions sans-serif small font
\captionsetup{font={footnotesize,sf},labelfont=bf,labelsep=period}

% configure pdf metadata and link handling, via hyperref package
\hypersetup{
    pdfauthor={\myname},
    pdftitle={\papertitle},
    pdfsubject={\papertitle},
    pdfkeywords={\paperkeywords},
    pdffitwindow=true, % window fit to page when opened
    breaklinks=true, % break links that overflow horizontally
    colorlinks=false, % remove link color
    pdfborder={0 0 0} % remove link border
}

\begin{document}

\title{\papertitle}%\footnote{{Preprint of: \papercitation}}}
\author[]{Redacted for review}%\myname\footnote{Correspondence: \href{mailto:\myemail}{\myemail}}}
\affil[]{Redacted for review}%\myaffiliation}
\date{}%\paperdate}

\maketitle

\begin{abstract}
Nunc efficitur dui non elementum tincidunt. Sed eget ultricies dui, nec congue massa. Fusce at faucibus arcu, a dapibus leo. Donec congue viverra lorem, et viverra massa pellentesque eu. Mauris dictum efficitur lectus, nec tempus velit viverra at. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In tristique urna purus, a viverra sapien vehicula at. Donec id lectus dui. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Ut viverra leo ac velit aliquam, id pellentesque est maximus. Proin laoreet aliquet ex vel semper. Integer congue sollicitudin elit, ut tincidunt odio tincidunt quis. Duis eu mi sed massa pellentesque efficitur.
\vspace{1cm}
\end{abstract}


\section{Introduction}

Context: tbd

Problem: old repository. New GHSL + years of OSM additions. New urban boundaries, hundreds of new GHSL variables. Node bc.

Solution: Using street data from OpenStreetMap and boundaries from the Global Human Settlement Layer (GHSL), this study models and analyzes the street networks of every urban area in the world. This comprises 180 million OpenStreetMap nodes and 360 million OpenStreetMap edges across 10,351 urban areas in 189 countries. This article describes the open data repository containing these models and measures, as well as the open-source software repository containing the code to generate them.

\section{Methods}

Here we describe the workflow that generates the models and calculates the indicators.

\subsection{Urban Boundaries}

The workflow begins by extracting the boundary polygons of each urban area in the world from the GHSL Urban Centre Database 2025, which contains 11,422 entities. Describe it.

We retain urban areas with >1 km\textsuperscript{2} built-up area, a \enquote{high} GHSL quality control score, and >3 OpenStreetMap network nodes, resulting in 10,351 urban areas. Defend why.

\subsection{Network Modeling}

We use OSMnx to download OpenStreetMap raw data and construct a spatial graph model of the drivable street network within each urban area. We parameterize OSMnx to use its \enquote{drive} network type, retain all graph components, and simplify the graph. Describe edge simplification.

Each graph is saved as a GraphML file.

\subsection{Elevation}

We attach elevation, in meters above sea level, to each node in each urban area's graph use two global digital elevation models (GDEMs): the Advanced Spaceborne Thermal Emission and Reflection Radiometer (ASTER) v3 GDEM, and the Shuttle Radar Topography Mission (SRTM) version 3.0 GDEM with voids filled.
Both are 1 arcsecond (approximately 30-meter) resolution.

First we download all the GDEM rasters from ASTER (45,824 tiles) and SRTM (14,297 tiles) from NASA EarthData. Then we build a virtual raster for each. Then we use OSMnx to load each GraphML file and attach the elevation from ASTER and SRTM to each graph node, then resave the file with these node attributes.

As each node has both an ASTER and an SRTM elevation value, we choose one to use as the \enquote{official} node elevation by comparing each to a \enquote{tie-breaker} value from Google. To do so, we download each node's elevation from the Google Maps Elevation API, then choose between ASTER and SRTM based on whichever is closer to Google's value. Then we calculate edge grades and resave each GraphML file.

\subsection{Indicator Calculation}

We calculate various street network measures. These include. Add table?

However, the most important contribution here is the calculation of node betweenness centrality for every node in every graph. Explain why. Describe max BC and Gini.

Create metadata files for the graphs' node and edge attributes and all of the indicators.

\subsection{Data Repository Preparation}

We convert each GraphML file to a GeoPackage and node/edge list comma-separated value (CSV) files. Explain why. Then we perform a set of file verification checks. The we compress and zip all model files (GeoPackages, GraphML, and node/edge lists) at the country level for upload to the Harvard Dataverse. We upload them using the Dataverse native API v1.

\section{Results}

\subsection{Code Repository}

These methods are fully reproducible by running the workflow in the code repository.

\subsection{Data Repository}

There are 5 datasets nested within the top-level Dataverse data repository.
- Global Urban Street Networks GeoPackages
- Global Urban Street Networks GraphML Files
- Global Urban Street Networks Node/Edge Lists
- Global Urban Street Networks Measures
- Global Urban Street Networks Metadata

\section{Conclusion}

Aliquam pulvinar, augue id blandit scelerisque, orci nulla consequat purus, quis accumsan lectus leo eu tortor. Donec tempor dolor vel dui lobortis viverra. Nam at orci quam. Ut ut efficitur tellus, in rhoncus odio. Duis egestas tortor lectus, eget sollicitudin eros ornare ac. Suspendisse faucibus mollis convallis. Mauris id risus blandit, suscipit dolor nec, posuere quam. Nulla facilisi. Cras nec hendrerit arcu, a mattis nisl. Nam dictum libero non lectus suscipit, vitae feugiat enim rutrum. Curabitur et leo dolor. Morbi dolor tellus, cursus posuere hendrerit et, convallis id nunc. Phasellus ultrices ante nulla, id rhoncus turpis efficitur in.

\section*{Acknowledgments}

The author wishes to thank the following people for their comments and support.

% print the footnotes as endnotes, if any exist
\IfFileExists{\jobname.ent}{\theendnotes}{}

% print the bibliography
\setlength{\bibsep}{0.00cm plus 0.05cm} % no space between items
\bibliographystyle{apalike}
\bibliography{references}

\end{document}
